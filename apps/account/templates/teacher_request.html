{% extends layout_path %}

{% load static %}
{% load i18n %}

{% block title %}Request Teacher Status - xLearning{% endblock %}

{% block page_css %}
{{ block.super }}
<style>
  .request-section {
    padding: 80px 0;
    position: relative;
    overflow: hidden;
  }
  
  .request-content {
    position: relative;
    z-index: 1;
  }
  
  .request-card {
    border-radius: 15px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
    overflow: hidden;
  }
  
  .request-header {
    padding: 25px 30px;
    background: linear-gradient(135deg, rgb(119, 158, 214) 0%, rgb(163, 137, 182) 100%);
    color: white;
    border-radius: 15px 15px 0 0;
  }
  
  .request-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }
  
  .request-subtitle {
    font-size: 0.95rem;
    opacity: 0.9;
  }
  
  .request-body {
    padding: 40px;
    background: white;
    border-radius: 0 0 15px 15px;
  }
</style>
{% endblock page_css %}

{% block content %}
<section class="request-section">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="request-content">
          <div class="request-card">
            <div class="request-header">
              <h3 class="request-title">Request Teacher Status</h3>
              <p class="request-subtitle mb-0">Tell us about your teaching qualifications and experience</p>
            </div>
            
            <div class="request-body">
              {% if messages %}
              {% for message in messages %}
              <div class="alert {% if message.tags == 'success' %}alert-success{% elif message.tags == 'error' %}alert-danger{% else %}alert-warning{% endif %} alert-dismissible mb-4" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
              {% endfor %}
              {% endif %}
              
              <div class="alert alert-info mb-4">
                <h5 class="alert-heading">Become a Teacher on xLearning</h5>
                <p>Complete this form to apply for teacher status. Our administrators will review your application and approve qualified teachers.</p>
                <p class="mb-0">Please provide detailed information about your qualifications and teaching experience to help us with the approval process.</p>
              </div>
              
              {% if request.user.profile.teacher_request_pending %}
              <div class="alert alert-warning mb-4">
                <h5 class="alert-heading">Application Pending</h5>
                <p class="mb-0">Your teacher application is currently under review. We'll notify you once a decision has been made.</p>
              </div>
              {% else %}
              <form id="teacherRequestForm" action="{% url 'account:teacher_request' %}" method="post">
                {% csrf_token %}
                
                <div class="mb-3">
                  <label for="qualifications" class="form-label">Educational Qualifications</label>
                  <textarea class="form-control" id="qualifications" name="qualifications" rows="3" placeholder="Degrees, certificates, or other educational qualifications relevant to language teaching"></textarea>
                </div>
                
                <div class="mb-3">
                  <label for="experience" class="form-label">Teaching Experience</label>
                  <textarea class="form-control" id="experience" name="experience" rows="3" placeholder="Describe your language teaching experience, including years teaching and contexts (online, classroom, etc.)"></textarea>
                </div>
                
                <div class="mb-3">
                  <label for="teaching_subjects" class="form-label">Language Teaching Focus</label>
                  <textarea class="form-control" id="teaching_subjects" name="teaching_subjects" rows="2" placeholder="Which languages do you teach? Any specific focus areas (conversation, business, etc.)?"></textarea>
                </div>
                
                <div class="mb-3">
                  <label for="additional_info" class="form-label">Additional Information</label>
                  <textarea class="form-control" id="additional_info" name="additional_info" rows="3" placeholder="Any additional information you'd like to share with our team"></textarea>
                </div>
                
                <div class="d-flex justify-content-between">
                  <button type="submit" class="btn btn-primary">
                    <i class="ti ti-send me-2"></i> Submit Application
                  </button>
                  <a href="{% url 'account:profile' %}" class="btn btn-outline-secondary">
                    <i class="ti ti-arrow-left me-2"></i> Back to Profile
                  </a>
                </div>
              </form>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

{% block page_js %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Form validation
    const teacherRequestForm = document.getElementById('teacherRequestForm');
    if (teacherRequestForm) {
      teacherRequestForm.addEventListener('submit', function(e) {
        const qualifications = document.getElementById('qualifications').value.trim();
        const experience = document.getElementById('experience').value.trim();
        
        if (!qualifications || !experience) {
          e.preventDefault();
          alert('Please fill in your qualifications and teaching experience.');
        }
      });
    }
  });
</script>
{% endblock %}